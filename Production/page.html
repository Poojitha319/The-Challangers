<!DOCTYPE html> 
<html> 
<head>
    <title>Interactive Video Player</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Press+Start+2P&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">
    <style>
        * {
            font-family: 'Press Start 2P', cursive;
        }
        body {
            background: #282828;
            color: white;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        #container {
            display: flex;
            justify-content: space-between;
            width: 100%;
            height: 70%;
        }
        #videoSection {
            width: 60%;
            height: 80%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        #videoControls {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }
        #videoControls button, #videoControls input {
            background-color: #18ca1e;
            color: white;
            padding: 15px 30px;
            font-size: 18px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            margin: 10px;
            text-align: center;
        }
        #subtitles {
            padding: 10px;
            background: #1a1a1a;
            color: yellow;
            font-size: 16px;
            text-align: center;
            position: relative; /* Enable positioning of floating text */
        }
        .floating-text {
            display: inline-block; /* Allow text to float independently */
            animation: float 2s ease-in-out infinite; /* Add floating animation */
        }
        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0); }
        }
        video {
            width: 100%;
            height: 100%;
        }
        #questionHistory {
            width: 35%;
            height: 100%;
            background: #251717;
            padding: 20px;
            position: relative;
        }
        .question-item {
            background: #07111f;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            cursor: pointer; /* Change cursor to pointer */
        }
        .question-item:hover {
            background: #0b1e30; /* Highlight on hover */
        }
        #qaSection {
            width: 100%;
            background: #1d1124;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .qna {
            margin: 20px 0;
        }
        .qna input, .qna textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: none;
        }
        .qna button {
            padding: 10px 20px;
            background: #2aad2f;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        #uploadSection {
            display: flex;
            justify-content: left;
        }
        .center-btn {
            display: flex;
            justify-content: center;
        }
        /* Floating answer window */
        #floatingWindow {
            display: none; /* Hidden by default */
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #1d1124;
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 1000; /* Ensure it is above other elements */
        }
        #closeWindow {
            background-color: red;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            padding: 5px 10px;
            float: right;
        }
    </style>
</head>
<body>

    <!-- Floating Answer Window -->
    <div id="floatingWindow">
        <button id="closeWindow">Close</button>
        <h4>Answer</h4>
        <p id="floatingAnswer"></p>
    </div>

    <!-- Video and Controls Section -->
    <div id="container">
        <div id="videoSection">

            <!-- Upload Section -->
            <div id="uploadSection">
                <input type="file" id="videoUpload" accept="video/*">
                <button onclick="loadVideo()" style="background-color: green; color: white;  height: 50px;"> Play Video</button>
            </div>

            <!-- Video Player -->
            <video id="vid" controls>
                <source id="source" src="#" type="video/mp4">
                Your browser does not support the video tag.
            </video>

            <!-- Subtitles Section -->
            <div id="subtitles"><span id="captionText">Subtitles will appear here...</span></div>
        </div>

        <!-- Question History Section -->
        <div id="questionHistory">
            <h3 style="text-decoration: underline;">Question History</h3>
            <div id="history"></div>
        </div>
    </div>

    <!-- Q&A Section -->
    <div id="qaSection">
        <h3 style="text-decoration: underline;">Question and Answer</h3>
        <div class="qna">
            <label for="question">Ask a question:</label>
            <input type="text" id="question" placeholder="Type your question here...">
        </div>
        <div class="qna">
            <label for="answer">Your answer:</label>
            <textarea id="answer" placeholder="Answer will be displayed here..." rows="4" readonly></textarea>
        </div>
        <div class="center-btn">
            <button onclick="submitQuestion()" style="background-color: green; color: white;  height: 50px;">Submit Question</button>
        </div>
    </div>

    <script>
        var vid = document.getElementById("vid");
        let captionInterval; // Variable to hold the interval ID

        // Array of random captions
        const captions = [
            "Welcome to the video!",
            "Enjoy the show!",
            "Stay tuned for more!",
            "What do you think?",
            "This is interesting!",
            "Don't miss this part!",
            "Have you ever seen this?",
            "Feel free to ask questions!",
            "Did you know this?",
            "What a fantastic view!"
        ];

        // Function to load the video
        function loadVideo() {
            var fileInput = document.getElementById('videoUpload');
            var file = fileInput.files[0];
            var url = URL.createObjectURL(file);
            document.getElementById('source').src = url;
            vid.load();
            vid.play();

            // Start generating captions when video plays
            vid.addEventListener('play', startCaptions);
        }

        // Function to start generating random captions
        function startCaptions() {
            captionInterval = setInterval(generateRandomCaption, 1000); // Change captions every second
        }

        // Function to generate random captions
        function generateRandomCaption() {
            var randomIndex = Math.floor(Math.random() * captions.length);
            var randomCaption = captions[randomIndex];
            document.getElementById('captionText').textContent = randomCaption;
        }

        // Function to submit the question
        function submitQuestion() {
            var question = document.getElementById('question').value;
            if (question.trim() === "") {
                alert("Please enter a question.");
                return;
            }

            // Create a random answer for demonstration
            var randomAnswer = "This is a sample answer for: " + question;

            // Display question and answer in Q&A section
            document.getElementById('answer').value = randomAnswer;

            // Add the question to history
            var questionHistory = document.getElementById('history');
            var questionItem = document.createElement('div');
            questionItem.className = 'question-item';
            questionItem.textContent = question;
            questionHistory.appendChild(questionItem);

            // Clear the input field
            document.getElementById('question').value = "";

            // Event listener to display the answer in a floating window on click
            questionItem.addEventListener('click', function() {
                document.getElementById('floatingAnswer').textContent = randomAnswer; // Set the corresponding answer
                document.getElementById('floatingWindow').style.display = 'block'; // Show the floating window
            });
        }

        // Function to close the floating window
        document.getElementById('closeWindow').addEventListener('click', function() {
            document.getElementById('floatingWindow').style.display = 'none'; // Hide the floating window
        });

        // Stop captions when video is paused or ended
        vid.addEventListener('pause', stopCaptions);
        vid.addEventListener('ended', stopCaptions);

        function stopCaptions() {
            clearInterval(captionInterval); // Clear the interval to stop captions
            document.getElementById('captionText').textContent = ""; // Clear captions when video ends
        }
    </script>

</body>
</html>
